import'dotenv/config';import {Collection,Client,GatewayIntentBits,Events,REST,Routes}from'discord.js';import C from'path';import f from'fs';import {pathToFileURL}from'url';var S=new Collection;async function w(){let t=process.env.NODE_ENV!=="production",m=t?"ts":"js",s=C.join(process.cwd(),t?"src":"dist","commands");if(!f.existsSync(s)){console.error("[ERROR]: Commands folder not found: ",s);return}let c=f.readdirSync(s);for(let i of c){let a=C.join(s,i),d=f.lstatSync(a),e;if(d.isDirectory()){let o=C.join(a,`${i}.${m}`);f.existsSync(o)&&(e=await import(pathToFileURL(o).href));}else i.endsWith(`.${m}`)&&(e=await import(pathToFileURL(a).href));if(e&&"command"in e){let o=e.command;S.set(o.data.name,o),console.log("komenda za\u0142adowana ",o.data.name);}}console.log(`\u2705 Loaded ${S.size} commands.`);}async function O(){let t=[],m=process.env.NODE_ENV!=="production",s=m?"ts":"js",c=C.join(process.cwd(),m?"src":"dist","commands"),i=f.readdirSync(c);for(let n of i){let y=C.join(c,n),N=f.lstatSync(y),l;if(N.isDirectory()){let p=C.join(y,`${n}.${s}`);f.existsSync(p)&&(l=await import(pathToFileURL(p).href));}else n.endsWith(`.${s}`)&&(l=await import(pathToFileURL(y).href));if(l?.command){let p=l.command;t.push(p.data.toJSON());}}let a=new REST().setToken(process.env.DISCORD_TOKEN),d=process.env.DISCORD_CLIENT_ID,e=process.env.BETA_GUILD?.split(",").map(n=>n.trim()).filter(Boolean)||[],o=process.env.DEPLOY_MODE||"both";try{if(console.log(`\u{1F680} Automatic deployment of ${t.length} started...`),o==="guild"||o==="both")for(let n of e)await a.put(Routes.applicationGuildCommands(d,n),{body:t}),console.log(`\u2705 Deployed commands to guild ${n}`);(o==="global"||o==="both")&&(await a.put(Routes.applicationCommands(d),{body:t}),console.log("\u2705 Deployed commands globally"));}catch(n){console.error("\u274C Error deploying commands:",n);}}var r=new Client({intents:[GatewayIntentBits.Guilds,GatewayIntentBits.GuildMembers,GatewayIntentBits.MessageContent]});await w();await O();r.on(Events.InteractionCreate,async t=>{t.isChatInputCommand()&&console.log(t.commandName," wywo\u0142ana");});r.once(Events.ClientReady,()=>{console.log(`\u{1F680} Bot ${r.user?.tag} is ready.`),console.log(`\u{1F680} Present on ${r.guilds.cache.size} servers.`);});r.login(process.env.DISCORD_TOKEN);//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map